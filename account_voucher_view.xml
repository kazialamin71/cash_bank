<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>

    <report
      id="action_report_bank_debit_voucher"
      model="account.invoice"
      string="Bank Debit Voucher"
      report_type="qweb-pdf"
      name="cash_bank.report_bank_debit_voucher"
      file="cash_bank.report_bank_debit_voucher"
    />

    <record id="view_vendor_receipt_form_inherit_cash_book" model="ir.ui.view">
      <field name="name">account.voucher.receipt.form.inherit.cash.book</field>
      <field name="model">account.voucher</field>
      <field name="inherit_id" ref="account_voucher.view_vendor_receipt_dialog_form"/>
      <field name="arch" type="xml">

        <!-- Add fields after reference OR after journal_id -->
        <xpath expr="//field[@name='reference']" position="after">
          <field name="cheque_number"/>
          <field name="cheque_issue_date"/>
          <field name="cheque_disburse_date"/>
        </xpath>

      </field>
    </record>



    <record id="view_vendor_payment_form_inherit_cheque" model="ir.ui.view">
  <field name="name">account.voucher.payment.form.inherit.cheque</field>
  <field name="model">account.voucher</field>
  <field name="inherit_id" ref="account_voucher.view_vendor_payment_form"/>
  <field name="arch" type="xml">

    <xpath expr="//field[@name='reference']" position="after">
      <separator string="Cheque Info" colspan="4"/>
      <field name="cheque_number"
             placeholder="Cheque No."/>
      <field name="cheque_issue_date"/>
      <field name="cheque_disburse_date"/>
    </xpath>

  </field>
</record>

<record id="view_voucher_tree_inherit_disburse_order" model="ir.ui.view">
      <field name="name">account.voucher.tree.inherit.disburse.order</field>
      <field name="model">account.voucher</field>
      <field name="inherit_id" ref="account_voucher.view_voucher_tree"/>
      <field name="arch" type="xml">

        <!-- Set default ordering -->
        <xpath expr="//tree" position="attributes">
          <attribute name="default_order">disburse_priority desc, cheque_disburse_date desc, date desc, id desc</attribute>
        </xpath>

        <!-- Add fields in list (optional but useful) -->
        <xpath expr="//field[@name='reference']" position="after">
          <field name="cheque_number"/>
          <field name="cheque_issue_date"/>
          <field name="cheque_disburse_date"/>
        </xpath>

      </field>
    </record>

    <record id="view_voucher_form_inherit_print" model="ir.ui.view">
      <field name="name">account.voucher.form.print.bank.debit</field>
      <field name="model">account.voucher</field>
      <field name="inherit_id" ref="account_voucher.view_vendor_receipt_form"/>
      <field name="arch" type="xml">
        <xpath expr="//header" position="inside">
          <button name="action_print_bank_debit_voucher"
                  type="object"
                  string="Print Bank Debit Voucher"
                  class="oe_highlight"
                  attrs="{'invisible':[('state','!=','posted')]}"/>
        </xpath>
      </field>
    </record>



    <record id="ir_cron_refresh_disburse_priority" model="ir.cron">
  <field name="name">Refresh Voucher Disburse Priority</field>
  <field name="model">account.voucher</field>
  <field name="function">cron_refresh_disburse_priority</field>
  <field name="args">()</field>
  <field name="interval_number">1</field>
  <field name="interval_type">days</field>
  <field name="numbercall">-1</field>
  <field name="active">True</field>
</record>




  </data>
</openerp>
